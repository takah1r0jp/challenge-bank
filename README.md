# Challenge Bank - 挑戦を貯金するアプリ

![CI](https://github.com/takah1r0jp/challenge-bank/workflows/CI/badge.svg)

**日々の挑戦を記録し、「貯金」することで成長を可視化するWebアプリケーション**

挑戦を習慣化し、自分の成長を実感できるプラットフォームです。挑戦を「貯金」として捉えることで、心理的ハードルを下げ、継続的な成長をサポートします。

🔗 **アプリURL**: [https://challenge-bank.vercel.app/](https://challenge-bank.vercel.app/)

## 📹 デモ動画

https://github.com/user-attachments/assets/0e718b0b-ed51-4698-88f9-7bee357afae3

---

## 📱 主な機能

### 1. 挑戦の記録
- **シンプルな記録**: 挑戦内容とスコアを入力するだけで記録完了
- **CRUD操作**: 挑戦の作成・閲覧・編集・削除が可能
- **リアルタイム更新**: 記録後すぐに統計データに反映

### 2. 成長の可視化
- **統計サマリー**: 全期間・今週・今月の挑戦数、合計スコア、平均スコアを一目で確認
- **カレンダービュー**: 月ごとの挑戦を日別に可視化し、活動パターンを把握
- **週次トレンド**: 今週の挑戦をグラフで表示し、成長の推移を確認

### 3. 通知機能
- **メール通知**: 毎日、通知時刻にメールで「今週の統計」を共有し、今日の振り返りを促進
- **カスタマイズ可能**: 通知時刻を自分のライフスタイルに合わせて設定可能

### 4. 認証・セキュリティ
- **JWT認証**: セキュアなトークンベース認証
- **パスワード暗号化**: Argon2によるパスワードハッシュ化

---

## 🛠️ 技術スタック

### フロントエンド
- **Framework**: Next.js 16 (App Router) + TypeScript
- **Styling**: Tailwind CSS + Radix UI
- **Form & Validation**: React Hook Form + Zod
- **Visualization**: Recharts
- **Deployment**: Vercel

### バックエンド
- **Framework**: FastAPI + SQLAlchemy
- **Database**: PostgreSQL
- **Authentication**: JWT + Argon2
- **Testing**: pytest
- **Deployment**: Railway

### インフラ・通知
- **Scheduled Notifications**: AWS Lambda + EventBridge
- **Database Hosting**: Railway PostgreSQL
- **CI/CD**: GitHub Actions

---

## 💡 開発背景

このアプリは、**2つの目的**を持って開発しました。

### 1. 挑戦への心理的ハードルを下げる
私自身、「もっと挑戦すべきだ」と感じながらも、失敗への恐れや完璧主義が行動を妨げていました。そこで、**挑戦を「貯金」という形で可視化**することで、小さな挑戦でも価値があると実感できるのではと考えました。

「今日はいくら貯めよう」というポジティブなモチベーションを生み出し、日々の挑戦を振り返ることで**成長の実感**を得られるアプリを目指しました。挑戦のハードルを下げ、失敗を恐れずに行動できる環境を作りたいという思いが、このアプリの原点です。

### 2. フルスタック開発の実践的な学習
これまで、アイデアから設計、実装、デプロイまで**一貫して自分で作り上げた経験**がありませんでした。このプロジェクトを通じて、以下の全フローを経験することを目標にしました：

- **要件定義**: ユーザーストーリーとMVP機能の洗い出し
- **データモデル設計**: ER図の作成、正規化、リレーションシップの設計
- **バックエンド開発**: REST API設計、認証実装、テスト駆動開発（TDD）
- **フロントエンド開発**: UIデザイン、状態管理、ユーザー体験の最適化
- **インフラ構築**: データベースホスティング、API/Webアプリデプロイ、通知システムの構築
- **CI/CD**: GitHub Actionsによる自動テスト・デプロイ

実際のサービス開発に近い形で、設計から運用まで一貫して経験できたことは、大きな学びとなりました。

---

## 🚀 開発プロセス

### 1. 要件定義・設計
- **ユーザーストーリー作成**: 「誰が」「何のために」「何をしたいか」を明確化
- **MVP機能の決定**: 挑戦記録・可視化・認証に絞り、段階的に拡張
- **データモデル設計**: `User`と`Challenge`モデルの関係性を定義
- **API設計**: RESTful APIのエンドポイント設計、レスポンス形式の統一

### 2. バックエンド開発（TDD採用）
- **テスト駆動開発（TDD）**: テストを先に書き、実装後にリファクタリング
- **認証機能**: JWT + Argon2によるセキュアな認証システム
- **CRUD API**: 挑戦記録の作成・取得・更新・削除
- **統計API**: 期間別の集計、カレンダーデータの生成（JST対応）
- **通知機能**: Resend統合、AWS Lambda定期実行、HTMLメールテンプレート

### 3. フロントエンド開発
- **Next.js App Router**: ファイルベースルーティング、サーバーコンポーネント活用
- **UI設計**: Radix UIとTailwind CSSでレスポンシブデザイン
- **フォーム管理**: React Hook Form + Zodでバリデーション
- **状態管理**: useStateとuseContextでグローバル認証状態を管理
- **データ可視化**: Rechartsで統計グラフとカレンダーを実装

### 4. デプロイ・インフラ
- **データベース**: Railway PostgreSQL（本番環境）
- **バックエンド**: RailwayにFastAPIデプロイ
- **フロントエンド**: VercelにNext.jsデプロイ（自動デプロイ設定）
- **通知**: AWS Lambda + EventBridgeで毎週月曜9:00 JSTに実行
- **CI/CD**: GitHub Actionsでリンター・テスト・カバレッジチェック

### 5. テスト・品質管理
- **ユニットテスト**: pytest + httpxで全エンドポイントをテスト
- **カバレッジ**: コードカバレッジ90%以上を維持
- **リンター**: Ruffでコード品質を自動チェック
- **CI**: プルリクエスト時に自動テスト実行

---

## 📚 学んだこと

### テスト駆動開発（TDD）の実践
これまでテストを後回しにしがちでしたが、**テストファースト**で開発することで、バグの早期発見とリファクタリングの安全性が大幅に向上しました。テストがドキュメントとして機能し、仕様を明確にできる点も大きなメリットでした。

### 認証・セキュリティの実装
JWT認証、パスワードハッシュ化（Argon2）、環境変数管理など、**本番環境で必要なセキュリティ対策**を一通り実装しました。特に、トークンの有効期限管理やCORS設定など、実際のサービスで考慮すべきポイントを学べました。

### データベース設計とORM
PostgreSQLを用いたリレーショナルデータベースの設計を経験し、**正規化**や**外部キー制約**の重要性を理解しました。また、SQLAlchemyのORMを使うことで、Pythonコードでデータベース操作を直感的に記述できる利点を実感しました。

### インフラとデプロイ
Railway、Vercel、AWS Lambdaといった**モダンなクラウドサービス**を活用し、インフラ構築の手間を大幅に削減できました。特にRailwayは、GitHubと連携した自動デプロイが非常に便利で、CI/CDの基礎を学べました。

### 定期実行・通知システム
AWS Lambda + EventBridgeを使った**サーバーレス定期実行**を初めて実装しました。タイムゾーン（JST）の扱いや、バッチ処理のエラーハンドリングなど、実運用で必要な知識を得られました。

### デザインシステムとAI活用による開発効率化
フロントエンド開発では、**既存のデザインパターンをプロンプトに含める**ことで、統一感のあるUIを効率的に実装できました。Material Design 3のガイドラインに沿ったコンポーネントをClaude Codeで生成し、一貫性を保ちながら開発速度を向上させました。

また、GitHub CopilotやAI開発ツールを活用することで、ボイラープレートコードの生成やテストコードの作成を効率化しました。ただし、**AIが生成したコードを鵜呑みにせず、必ず理解・検証してから採用する**習慣を身につけることが重要だと学びました。AIはあくまで補助ツールであり、設計判断や要件定義は開発者が行うべきという認識を持つようになりました。

---

## 🔍 反省と次への活かし方

### 要件定義の重要性
今回は「とりあえず作ってみる」という学習意図もあり、**ユーザーが本当に使いたくなる機能**まで深掘りできませんでした。次のプロジェクトでは、「誰の」「どのペイン（課題）」を解消するのかを徹底的に作り込んでから実装に入りたいと考えています。

### 学習と実践のバランス
一方で、「既存のアプリがあるから作らない」という思考に陥ると、技術力向上の機会を逃してしまいます。**まずは手を動かすこと**も重要だと感じたため、今後は「要件定義をしっかり行うプロジェクト」と「技術検証目的の小規模プロジェクト」をバランスよく進めたいと思います。

### フロントエンドのUX改善
統計やカレンダーの可視化は実装できましたが、**ユーザー体験（UX）**の面ではまだ改善の余地があります。ローディング状態の表示、エラーハンドリング、レスポンシブ対応など、細部にこだわることでプロダクトの完成度が上がることを実感しました。

---

## 📂 プロジェクト構成

```
challenge-bank/
├── frontend/               # Next.js フロントエンド
│   ├── app/                # App Router (ルーティング)
│   ├── components/         # UIコンポーネント
│   └── lib/                # ユーティリティ (API, 認証)
├── backend/                # FastAPI バックエンド
│   ├── main.py             # APIエンドポイント
│   ├── models.py           # SQLAlchemyモデル
│   ├── schemas.py          # Pydanticスキーマ
│   ├── auth.py             # 認証ロジック
│   ├── database.py         # DB接続
│   └── tests/              # pytestテストコード
├── .github/workflows/      # GitHub Actions CI/CD
└── CLAUDE.md               # 開発ドキュメント
```

---

## 🚀 ローカル開発

ローカル環境でのセットアップ手順は [DEVELOPMENT.md](./DEVELOPMENT.md) を参照してください。

---

## 📈 今後の改善予定

- [ ] **フィルタリング・検索機能**: 日付範囲、スコア範囲での絞り込み
- [ ] **タグ機能**: 挑戦をカテゴリ分けして整理
- [ ] **目標設定機能**: 週間・月間目標を設定し、達成度を可視化
- [ ] **エクスポート機能**: CSV/JSON形式でデータをエクスポート
- [ ] **ソーシャル機能**: 挑戦をコミュニティで共有
- [ ] **AI分析**: 挑戦パターンの分析、アドバイス生成

---

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

**作成者**: [takah1r0jp](https://github.com/takah1r0jp)
**リポジトリ**: [https://github.com/takah1r0jp/challenge-bank](https://github.com/takah1r0jp/challenge-bank)
